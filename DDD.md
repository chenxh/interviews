## 基础概念
### 领域
领域就是用来确定范围的，范围即边界，这也是 DDD 在设计中不断强调边界的原因。简言之，DDD 的领域就是这个边界内要解决的业务问题域。
领域可以进一步划分为子领域。

### 限界上下文
限界就是领域的边界，而上下文则是语义环境。
用来封装通用语言和领域对象，提供上下文环境。

限界上下文是微服务设计和拆分的主要依据。在领域模型中，如果不考虑技术异构、团队沟通等其它外部因素，一个限界上下文理论上就可以设计为一个微服务。

### 贫血模型和充血模型
贫血模型和充血模型是 DDD 的两种主要模型。

贫血模型是指领域模型中只包含实体和值对象，不包含任何行为。

充血模型是指领域模型中包含行为，行为可以是方法、函数、过程等。充血模型可以更好地反映业务领域，更好地实现业务需求。

### 实体
实体是指在业务领域中具有唯一标识的事物，如客户、订单、商品等。实体可以有属性、行为。
在 DDD 里，这些实体类通常采用充血模型，与这个实体相关的所有业务逻辑都在实体类的方法中实现，跨多个实体的领域逻辑则在领域服务中实现。

### 值对象
值对象是指在业务领域中不具有唯一标识的事物，如地址、价格、日期等。值对象可以有属性，但不能有行为，不能修改、只能替换。

### 聚合
聚合就是由业务和逻辑紧密关联的实体和值对象组合而成的，聚合是数据修改和持久化的基本单元，每一个聚合对应一个仓储，实现数据的持久化。

### 聚合根
聚合根是聚合的核心，它负责对聚合内的实体和值对象进行操作，并向其它聚合发送命令。聚合根可以是一个实体，也可以是一个值对象。

聚合之间通过聚合根 ID 关联引用，如果需要访问其它聚合的实体，就要先访问聚合根，再导航到聚合内部实体，外部对象不能直接访问聚合内实体。


### 领域事件
领域事件是指在业务领域中发生的重要事件，如订单创建、商品下架等。领域事件可以用于业务流程的建模、消息的传递、事件的订阅等。



## DDD分层架构
用户界面层。 前端页面，外部接口
应用层：接口服务
领域层：service层，实体层，值对象层，领域服务层，领域事件层。 商品中心，订单中心，用户中心，支付中心，库存中心，物流中心等。
基础设施层：数据访问层，消息队列层，缓存层，搜索引擎层，日志层等。

DDD 分层架构有一个重要的原则：每层只能与位于其下方的层发生耦合。

## 建模步骤（秒杀）
战略建模
1. 划分领域模型层。
2. 为领域层划分核心域和非核心域； 核心域：秒杀活动信息。非核心域：商品信息，库存信息，用户信息，订单信息。
3. 确定各领域的限界上下文。领域边界。
4. 为限界上下文建立上下文映射图。 核心域：活动上下文（场次和主题）

战术建模
1. 实体（主题、商品、账号）。
2. 值对象。实际库存、销售库存。
3. 聚合根。 场次、活动商品
4. 领域事件。 活动未开始、活动进行中、活动已结束




